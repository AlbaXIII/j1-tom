{% extends "base.html" %}
{% block content %}
    <div class="main-title">
            <h1>J1-TOM</h1>
            <p>Japanese Football, simplified.</p>
    </div>
    <div class="main-subtitle">
            <h2>Match Centre</h2>
            <h3>ホームページ</h3>
    </div>
    {% if fixtures %}
        <div class="main-select">
            Select Matchday:
        </div>
        <div class="matchday-selector">
            <label for="matchday-select">Select Matchday:</label>
            <select id="matchday-select">
                {% for round_name in fixtures.keys() %}
                <option value="{{ loop.index0 }}">{{ round_name }}</option>
                {% endfor %}
            </select>
        </div>

        {% for round_name, matches in fixtures.items() %}
        <div class="matchday-section" data-matchday="{{ loop.index0 }}">
            <h3 class="round-title">{{ round_name }}</h3>
            
            <div class="fixtures-container">
                {% for match in matches %}
                <div class="fixture-card">
                    {% if match.teams.home.name in team_lookup %}
                    <a href="{{ url_for('team_detail', team_id=team_lookup[match.teams.home.name]) }}" class="team home-team team-link">
                        <img src="{{ match.teams.home.logo }}" alt="{{ match.teams.home.name }}" class="team-badge">
                        <span class="team-name">{{ match.teams.home.name }}</span>
                    </a>
                    {% else %}
                    <div class="team home-team">
                        <img src="{{ match.teams.home.logo }}" alt="{{ match.teams.home.name }}" class="team-badge">
                        <span class="team-name">{{ match.teams.home.name }}</span>
                    </div>
                    {% endif %}
                    
                    <div class="match-centre">
                        {% if match.fixture.status.short == 'FT' %}
                            <div class="score">
                                <span class="score-number">{{ match.goals.home }}</span>
                                <span class="score-separator">-</span>
                                <span class="score-number">{{ match.goals.away }}</span>
                            </div>
                            <div class="match-status finished">Full Time</div>
                        {% elif match.fixture.status.short == 'NS' %}
                            <div class="versus">VS</div>
                            <div class="match-status upcoming">{{ match.fixture.date[8:10] }}/{{ match.fixture.date[5:7] }}/{{ match.fixture.date[:4] }}</div>
                            <div class="match-time">{{ match.fixture.date[11:16] }}</div>
                        {% elif match.fixture.status.short in ['1H', '2H', 'HT'] %}
                            <div class="score live">
                                <span class="score-number">{{ match.goals.home }}</span>
                                <span class="score-separator">-</span>
                                <span class="score-number">{{ match.goals.away }}</span>
                            </div>
                            <div class="match-status live-indicator">
                                <span class="live-dot"></span>
                                LIVE {{ match.fixture.status.elapsed }}'
                            </div>
                        {% else %}
                            <div class="match-status">{{ match.fixture.status.long }}</div>
                        {% endif %}
                    </div>
                    
                    {% if match.teams.away.name in team_lookup %}
                    <a href="{{ url_for('team_detail', team_id=team_lookup[match.teams.away.name]) }}" class="team away-team team-link">
                        <span class="team-name">{{ match.teams.away.name }}</span>
                        <img src="{{ match.teams.away.logo }}" alt="{{ match.teams.away.name }}" class="team-badge">
                    </a>
                    {% else %}
                    <div class="team away-team">
                        <span class="team-name">{{ match.teams.away.name }}</span>
                        <img src="{{ match.teams.away.logo }}" alt="{{ match.teams.away.name }}" class="team-badge">
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No fixtures available for the 2025 season yet.</p>
    {% endif %}
{% endblock %}